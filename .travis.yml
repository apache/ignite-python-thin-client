# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

sudo: required
services:
  - docker

env:
  COMPOSE_VERSION: 1.27.4

_install-tox: &install-tox
  before_install:
    - curl -L https://github.com/docker/compose/releases/download/${COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
    - chmod +x docker-compose
    - sudo mv docker-compose /usr/local/bin
  install: pip install tox

matrix:
  include:
    - language: python
      python: 3.6.12
      <<: *install-tox
      script:
        - tox -e py36-no-ssl,py36-ssl,py36-ssl-password

    - language: python
      python: 3.7.9
      <<: *install-tox
      script:
        - tox -e py37-no-ssl,py37-ssl,py37-ssl-password

    - language: python
      python: 3.8.5
      <<: *install-tox
      script:
        - tox -e tox -e py38-no-ssl,py38-ssl,py38-ssl-password
